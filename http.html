<!-- 23 june 2016 -->
<!DOCTYPE html>
<html>
<head>
	<script type="text/javascript">
	<!--
	function byid(id) {
		return document.getElementById(id)
	}

	function issue() {
		var requrl = byid("requrl");
		var reqtype = byid("reqtype");
		var reqbearer = byid("reqbearer");
		var reqctype = byid("reqctype");
		var reqbody = byid("reqbody");
		var reqcrlf = byid("reqcrlf");
		var respcode = byid("respcode");
		var respbody = byid("respbody");

		try {
			var req = new XMLHttpRequest();
			req.open(reqtype.value, requrl.value, false);
			req.setRequestHeader("Content-Type", reqctype.value);
			if (reqbearer.value != "")
				req.setRequestHeader("Authorization", "Bearer " + reqbearer.value);
			var value = reqbody.value;
			if (reqcrlf.checked)
				value = value.replace(/\n/g, "\r\n");
			req.send(value);
			respcode.innerHTML = req.status;
			var resptext = req.responseText;
			try {
				var resp = JSON.parse(resptext);
				respbody.value = JSON.stringify(resp, null, 4);
			} catch (e) {
				respbody.value = resptext;
			}
		} catch (e) {
			respcode.innerHTML = "fail";
			respbody.value = e;
		}
		respbody.style.width = respbody.scrollWidth + "px";
		respbody.style.height = respbody.scrollHeight + "px";
	}
	//-->
	</script>
</head>
<body>
	<input type="text" id="requrl" value="http://127.0.0.1:8000/" required><br>
	<input type="text" id="reqtype" value="GET" required><br>
	<input type="text" id="reqbearer" value=""><br>
	<input type="text" id="reqctype" value="application/json"><br>
	<textarea id="reqbody"></textarea><br>
	<input type="checkbox" id="reqcrlf" value="">CR/LF<br>
	<button onclick="issue()">Issue</button><br>
	<span id="respcode"></span><br>
	<textarea id="respbody"></textarea>
</body>
</html>
